<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì§„ìƒë ¥ ê²°ê³¼</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Supabase ì—°ê²°ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <style>
    body {
      font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
      background-color: #f7f7f7;
      margin: 0;
      padding: 24px;
    }
    .container {
      max-width: 720px;
      margin: 0 auto;
      background-color: white;
      border-radius: 24px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      padding: 32px;
    }
    .score {
      font-size: 20px;
      margin-bottom: 12px;
      text-align: center;
    }
    .score strong {
      font-size: 32px;
      color: #5c7cfa;
    }
    .type-summary {
      margin-top: 32px;
      padding: 24px;
      background-color: #f0f4ff;
      border-radius: 18px;
    }
    .type-summary h3 {
      margin: 0 0 12px;
    }
    .type-summary ul {
      padding-left: 18px;
    }
    .type-summary em {
      color: #5c7cfa;
      font-style: italic;
    }
    .toggle-button {
      margin-top: 24px;
      color: #3b5bdb;
      font-weight: bold;
      cursor: pointer;
    }
    #chartSection {
      display: none;
      margin-top: 24px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 16px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 12px;
      text-align: center;
    }
    th {
      background-color: #f1f3f5;
    }
    .meaning-text {
      text-align: left;
    }
    .dot {
      height: 12px;
      width: 12px;
      border-radius: 50%;
      display: inline-block;
      margin-right: 6px;
    }
    .green { background-color: #40c057; }
    .yellow { background-color: #fab005; }
    .orange { background-color: #fd7e14; }
    .red { background-color: #fa5252; }
  </style>
</head>
<body>
  <div class="container">
    <h2 style="text-align:center">ë‹¹ì‹ ì˜ ì§„ìƒë ¥ ê²°ê³¼</h2>
    <div class="score" id="totalScore">
    ì§„ìƒë ¥ ì ìˆ˜ (ë°±ë¶„ìœ„): <strong>ê³„ì‚° ì¤‘...</strong>
    </div>

    <table>
      <thead>
        <tr>
          <th>ë°±ë¶„ìœ„<br>êµ¬ê°„</th>
          <th>ì§„ìƒë ¥<br>í‰ê°€</th>
          <th>ì˜ë¯¸</th>
        </tr>
      </thead>
      <tbody>
        <tr><td>1~24%</td><td><div><span class="dot green"></span>ëª¨ë²”<br>ì‹œë¯¼</div></td><td class="meaning-text">ì´ ì •ë„ë©´ ì¸ê²©ì ìˆ˜ì¤€! ì¼ìƒ ì† ë°°ë ¤ê°€ ëª¸ì— ë°´ ì‚¬ëŒ</td></tr>
        <tr><td>25~49%</td><td><div><span class="dot yellow"></span>ì ì¬<br>ì§„ìƒ</div></td><td class="meaning-text">ì¼ìƒì—ì„œ ê°€ë” ìš±í•˜ê±°ë‚˜ ìê¸°ì¤‘ì‹¬ ë°˜ì‘ì´ ìˆì„ ìˆ˜ ìˆìŒ</td></tr>
        <tr><td>50~74%</td><td><div><span class="dot orange"></span>ê²½ê³„<br>ì§„ìƒ</div></td><td class="meaning-text">ê½¤ ë§ì€ ë¬¸í•­ì—ì„œ ì§„ìƒ ë°˜ì‘ì´ ë³´ì„. ìê° í•„ìš”</td></tr>
        <tr><td>75~100%</td><td><div><span class="dot red"></span>ê³ ê¸‰<br>ì§„ìƒ</div></td><td class="meaning-text">ìœ í˜• ë¶ˆë¬¸, ì–´ë””ì„œë“  ì§„ìƒë ¥ì„ ìœ ê°ì—†ì´ ë°œíœ˜ ì¤‘</td></tr>
      </tbody>
    </table>

    <div class="type-summary" id="typeSummary"></div>

    <div style="margin-top: 40px; text-align: center;">
  <button onclick="goToStart()" style="margin: 4px; padding: 10px 20px; font-size: 14px; border: none; background-color: #5c7cfa; color: white; border-radius: 6px; cursor: pointer;">
    ì²˜ìŒë¶€í„° ë‹¤ì‹œí•˜ê¸°
  </button>
  <button onclick="shareTest()" style="margin: 4px; padding: 10px 20px; font-size: 14px; border: none; background-color: #20c997; color: white; border-radius: 6px; cursor: pointer;">
    í…ŒìŠ¤íŠ¸ ê³µìœ í•˜ê¸°
  </button>
  <p style="font-size: 13px; color: #666; margin-top: 4px;">
  â€œë„ˆ ì´ê±° ê¼­ í•´ë´â€ í•˜ë©´ì„œ ë§í¬ ë˜ì§€ë©´ ë©ë‹ˆë‹¤ ğŸ˜
  </p>
  <button onclick="goToAbout()" style="margin: 4px; padding: 10px 20px; font-size: 14px; border: none; background-color: #868e96; color: white; border-radius: 6px; cursor: pointer;">
    ë§Œë“  ì‚¬ëŒ
  </button>
</div>

    <div class="toggle-button" id="toggleChart">
    â–¼ ìœ í˜•ë³„ ì ìˆ˜ ë³´ê¸° <span style="font-size:13px; color:#888;">(ê°€ë” ë‘ ë²ˆ ëˆŒëŸ¬ì•¼ ëœ¹ë‹ˆë‹¤ ğŸ˜…)</span>
    </div>
    <div id="chartSection">
      <canvas id="radarChart" width="300" height="300"></canvas>
    </div>
  </div>
  
  <script>
    const SUPABASE_URL = 'https://jeacvuzntcfbbfaevzhg.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImplYWN2dXpudGNmYmJmYWV2emhnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM1Njc3NjAsImV4cCI6MjA1OTE0Mzc2MH0.boq7XH_mw4cuZ6dARc5U8iGSXvrS2haDmWLJFz8i26g';
    const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
  
    let percentiles;
    let dominant;
    
    const answers = JSON.parse(localStorage.getItem("allAnswers") || "[]");
    if (answers.length !== 25 || answers.some(a => isNaN(a))) {
      alert("ì‘ë‹µì´ ëˆ„ë½ë˜ì—ˆê±°ë‚˜ ì˜ëª»ëœ ê°’ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì£¼ì„¸ìš”.");
      location.href = "index.html";
    }

    const typeScoresRaw = {
      "ê¶Œë¦¬ê³¼ì‰í˜•": 0, "ê³¼ë¯¼ë°˜ì‘í˜•": 0,
      "ì˜¤ì§€ë–í˜•": 0, "ìê¸°ì¤‘ì‹¬í˜•": 0,
      "í”¼í•´ë§ìƒí˜•": 0
    };

    const part1Map = { "ê³¼ë¯¼ë°˜ì‘í˜•": [6,10,15], "ê¶Œë¦¬ê³¼ì‰í˜•": [2,3,5], "ì˜¤ì§€ë–í˜•": [8,11,13], "ìê¸°ì¤‘ì‹¬í˜•": [4,7,14], "í”¼í•´ë§ìƒí˜•": [1,9,12] };
    const part2Map = [
      ["í”¼í•´ë§ìƒí˜•", "ìê¸°ì¤‘ì‹¬í˜•", null, "ì˜¤ì§€ë–í˜•"],
      ["ê¶Œë¦¬ê³¼ì‰í˜•", "ì˜¤ì§€ë–í˜•", "ê³¼ë¯¼ë°˜ì‘í˜•", null],
      [null, "ìê¸°ì¤‘ì‹¬í˜•", "í”¼í•´ë§ìƒí˜•", "ê¶Œë¦¬ê³¼ì‰í˜•"],
      ["ê³¼ë¯¼ë°˜ì‘í˜•", "ê¶Œë¦¬ê³¼ì‰í˜•", "ì˜¤ì§€ë–í˜•", null],
      ["í”¼í•´ë§ìƒí˜•", null, "ì˜¤ì§€ë–í˜•", "ê³¼ë¯¼ë°˜ì‘í˜•"],
      ["ê¶Œë¦¬ê³¼ì‰í˜•", "ìê¸°ì¤‘ì‹¬í˜•", null, "ì˜¤ì§€ë–í˜•"],
      [null, "í”¼í•´ë§ìƒí˜•", "ìê¸°ì¤‘ì‹¬í˜•", "ì§„ìƒ ì•„ë‹˜"],
      ["ì˜¤ì§€ë–í˜•", "ê³¼ë¯¼ë°˜ì‘í˜•", null, "í”¼í•´ë§ìƒí˜•"],
      ["ê¶Œë¦¬ê³¼ì‰í˜•", null, "ê³¼ë¯¼ë°˜ì‘í˜•", "ìê¸°ì¤‘ì‹¬í˜•"],
      ["í”¼í•´ë§ìƒí˜•", "ê¶Œë¦¬ê³¼ì‰í˜•", null, "í”¼í•´ë§ìƒí˜•"]
    ];

  /*******************************************
     3) typeScoresRaw ê³„ì‚° (ì›ì ìˆ˜)
    ********************************************/
    // part1
    Object.entries(part1Map).forEach(([type, indices]) => {
      indices.forEach(i => typeScoresRaw[type] += answers[i - 1]);
    });
    // part2
    part2Map.forEach((row, i) => {
      const choice = answers[15 + i] - 1;
      const type = row[choice];
      if (type && typeScoresRaw[type] !== undefined) {
        typeScoresRaw[type] += 3;
      }
    });

    /*******************************************
     4) total êµ¬í•˜ê¸° & dominant
    ********************************************/
    let total = 0;
    Object.values(typeScoresRaw).forEach(score => total += score);

    dominant = Object.entries(typeScoresRaw)
                    .reduce((a,b) => b[1] > a[1] ? b : a)[0];

    /*******************************************
     5) ë°±ë¶„ìœ„ ê³„ì‚° í•¨ìˆ˜ + Supabase ì €ì¥
    ********************************************/
    async function calculatePercentiles() {
      // 5-1) ì „ì²´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
      const { data: allData, error } = await supabaseClient
        .from('responses')
        .select(`
          total_score,
          type_entitlement,
          type_overreactive,
          type_overinvolvement,
          type_centered,
          type_paranoia
        `);

      if (error || !allData) {
        console.error("ğŸ“‰ ë°±ë¶„ìœ„ ê³„ì‚° ì‹¤íŒ¨:", error);
        alert("ê²°ê³¼ ê³„ì‚° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        return;
      }

      // 5-2) ë°±ë¶„ìœ„ ê³„ì‚° í•¨ìˆ˜
      const getPercentile = (myScore, allScores) => {
        const lessThan = allScores.filter(s => s < myScore).length;
        const equalTo = allScores.filter(s => s === myScore).length;
        return Math.round(((lessThan + 0.5 * equalTo) / allScores.length) * 100);
      };

      // 5-3) ì „ì²´ ì‘ë‹µì—ì„œ score ë¦¬ìŠ¤íŠ¸ ì¶”ì¶œ
      const totalList = allData.map(d => d.total_score);
      const typeList = {
        "ê¶Œë¦¬ê³¼ì‰í˜•": allData.map(d => d.type_entitlement),
        "ê³¼ë¯¼ë°˜ì‘í˜•": allData.map(d => d.type_overreactive),
        "ì˜¤ì§€ë–í˜•": allData.map(d => d.type_overinvolvement),
        "ìê¸°ì¤‘ì‹¬í˜•": allData.map(d => d.type_centered),
        "í”¼í•´ë§ìƒí˜•": allData.map(d => d.type_paranoia),
      };

      // 5-4) ì „ì—­ ë³€ìˆ˜ percentilesì— ë°±ë¶„ìœ„ ê²°ê³¼ ì €ì¥
      percentiles = {
        total: getPercentile(total, totalList)
      };
      for (const [type, arr] of Object.entries(typeList)) {
        percentiles[type] = getPercentile(typeScoresRaw[type], arr);
      }

      // 5-5) ì´ì  ë°±ë¶„ìœ„ í™”ë©´ í‘œì‹œ
      document.getElementById("totalScore").innerHTML =
        `ì§„ìƒë ¥ ì ìˆ˜ (ë°±ë¶„ìœ„): <strong>${percentiles.total}</strong> <span style="color:#333; font-size: 20px">%</span>`;

      // 5-6) ë ˆì´ë” ì°¨íŠ¸ë„ ë°±ë¶„ìœ„ë¡œ ê·¸ë¦¼
      drawRadarChart({
        "ê¶Œë¦¬ê³¼ì‰í˜•": percentiles["ê¶Œë¦¬ê³¼ì‰í˜•"],
        "ê³¼ë¯¼ë°˜ì‘í˜•": percentiles["ê³¼ë¯¼ë°˜ì‘í˜•"],
        "ì˜¤ì§€ë–í˜•": percentiles["ì˜¤ì§€ë–í˜•"],
        "ìê¸°ì¤‘ì‹¬í˜•": percentiles["ìê¸°ì¤‘ì‹¬í˜•"],
        "í”¼í•´ë§ìƒí˜•": percentiles["í”¼í•´ë§ìƒí˜•"]
      });

      // 5-7) ê²°ê³¼ DBì— ì €ì¥
      if (!localStorage.getItem("alreadySaved")) {
        await saveToSupabase();
        localStorage.setItem("alreadySaved", "yes");
      }

    } 

     /*******************************************
     6) ì‹¤ì œ DB ì €ì¥ í•¨ìˆ˜
    ********************************************/
    async function saveToSupabase() {
      const { data, error } = await supabaseClient.from('responses').insert([{
        total_score: total,
        type_entitlement: typeScoresRaw["ê¶Œë¦¬ê³¼ì‰í˜•"],
        type_overreactive: typeScoresRaw["ê³¼ë¯¼ë°˜ì‘í˜•"],
        type_overinvolvement: typeScoresRaw["ì˜¤ì§€ë–í˜•"],
        type_centered: typeScoresRaw["ìê¸°ì¤‘ì‹¬í˜•"],
        type_paranoia: typeScoresRaw["í”¼í•´ë§ìƒí˜•"],
        dominant_type: dominant,
        raw_answers: JSON.stringify(answers)
      }]);

      if (error) {
        console.error("âŒ Supabase ì €ì¥ ì˜¤ë¥˜:", error);
      } else {
        console.log("âœ… Supabaseì— ì €ì¥ ì™„ë£Œ!", data);
      }
    }

    /*******************************************
     7) ì°¨íŠ¸ í† ê¸€ / ë ˆì´ë” ì°¨íŠ¸
    ********************************************/
document.getElementById("toggleChart").addEventListener("click", () => {
  const section = document.getElementById("chartSection");
  const isHidden = section.style.display === "none";
  section.style.display = isHidden ? "block" : "none";

  if (isHidden && percentiles) {
    requestAnimationFrame(() => {
      drawRadarChart({
        "ê¶Œë¦¬ê³¼ì‰í˜•": percentiles["ê¶Œë¦¬ê³¼ì‰í˜•"],
        "ê³¼ë¯¼ë°˜ì‘í˜•": percentiles["ê³¼ë¯¼ë°˜ì‘í˜•"],
        "ì˜¤ì§€ë–í˜•": percentiles["ì˜¤ì§€ë–í˜•"],
        "ìê¸°ì¤‘ì‹¬í˜•": percentiles["ìê¸°ì¤‘ì‹¬í˜•"],
        "í”¼í•´ë§ìƒí˜•": percentiles["í”¼í•´ë§ìƒí˜•"]
      });
    });
  }
});


    let radarChartInstance;  // <-- ì œì¼ ìœ„ì— ì„ ì–¸
    
    function drawRadarChart(scores) {
      const ctx = document.getElementById("radarChart").getContext("2d");
      if (radarChartInstance) radarChartInstance.destroy();  // <-- ì´ í•œ ì¤„!
      radarChartInstance = new Chart(ctx, {
      type: "radar",
      data: {
      labels: Object.keys(scores),
      datasets: [{
        label: "ìœ í˜•ë³„ ì ìˆ˜ (ë°±ë¶„ìœ„)",
        data: Object.values(scores),
        backgroundColor: "rgba(91, 128, 255, 0.2)",
        borderColor: "rgba(91, 128, 255, 1)",
        pointBackgroundColor: "rgba(91, 128, 255, 1)",
        borderWidth: 2
      }]
    },
    options: {
      scales: {
        r: {
          suggestedMin: 0,
          suggestedMax: 100
        }
      }
    }
  });
}

const typeDescriptions = {
  "ê¶Œë¦¬ê³¼ì‰í˜•": {
    emoji: "ğŸ§·",
    title: "ê¶Œë¦¬ê³¼ì‰í˜• (Entitlement Type)",
    desc: [
      "ìì‹ ì´ â€˜ì •ë‹¹í•œ ëŒ€ìš°â€™ë¥¼ ë°›ì„ ìê²©ì´ ìˆë‹¤ê³  ê³¼ë„í•˜ê²Œ ë¯¿ìœ¼ë©°, ì‘ì€ ë¶ˆí¸ì´ë‚˜ ì‹¤ìˆ˜ì—ë„ ë³´ìƒì„ ìš”êµ¬í•˜ê±°ë‚˜ ê°•í•˜ê²Œ í•­ì˜í•¨.",
      "â€œë‚´ê°€ ëˆì„ ëƒˆìœ¼ë‹ˆ ë‹¹ì—°íˆ â—‹â—‹í•´ì•¼ í•œë‹¤â€ëŠ” ì‹ì˜ ì‚¬ê³ ",
      "ì‹¤ìˆ˜ë‚˜ ë¶ˆí¸ì— ëŒ€í•´ ê³¼ì‰ ëŒ€ì‘í•˜ë©° ë³´ìƒì„ ìš”êµ¬í•¨",
      "SNS í›„ê¸°ë‚˜ ê³ ê°ì„¼í„° í•­ì˜ë¥¼ ì •ë‹¹í•œ â€˜ê¶Œë¦¬ í–‰ì‚¬â€™ë¡œ ì—¬ê¹€",
      "ì„œë¹„ìŠ¤ ì œê³µì(ì§ì›, ì ì› ë“±)ë¥¼ ì¼ë°©ì  í•˜ê¸‰ìë¡œ ì¸ì‹"
    ],
    tip: "ë•Œë¡œëŠ” ìƒëŒ€ë°©ì˜ ì‚¬ì •ë„ ë“¤ì–´ë³´ëŠ” ìœ ì—°í•¨ì´ í•„ìš”í•©ë‹ˆë‹¤."
  },
  "ê³¼ë¯¼ë°˜ì‘í˜•": {
    emoji: "ğŸ’¢",
    title: "ê³¼ë¯¼ë°˜ì‘í˜• (Overreactive Type)",
    desc: [
      "ì‘ì€ ìê·¹ì´ë‚˜ ì¼ìƒì  ë¶ˆí¸ì—ë„ ê°ì •ì ìœ¼ë¡œ ê³¼ë„í•˜ê²Œ ë°˜ì‘í•˜ë©°, ì§œì¦Â·ë¶„ë…¸Â·ë°©ì–´ ë°˜ì‘ì´ ë¹ ë¥´ê²Œ ì¼ì–´ë‚˜ëŠ” ìœ í˜•.",
      "ì‚¬ì†Œí•œ ì¼(ê¸¸ì—ì„œ ë¶€ë”ªí˜, ìŒì‹ ì§€ì—° ë“±)ì— ë°”ë¡œ ì§œì¦",
      "â€˜ë¬´ì‹œë‹¹í–ˆë‹¤â€™, â€˜ì˜ˆë¯¼í•˜ë‹¤ëŠ” ì†Œë¦¬ ë“¤ì—ˆë‹¤â€™ëŠ” ë° ì˜ˆë¯¼í•¨",
      "ë°˜ë°•, ë¹„íŒ, ì•½ì† ì§€ì—° ë“±ì— ê°ì • í­ë°œ",
      "ì‚¬íšŒì  ì˜ê²¬ ì¶©ëŒ(ëŒ“ê¸€ ë“±)ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘"
    ],
    tip: "ìˆœê°„ì ì¸ ê°ì •ë³´ë‹¤ ìƒëŒ€ì˜ ì˜ë„ë¥¼ ë¨¼ì € íŒŒì•…í•´ë³´ì„¸ìš”."
  },
  "ì˜¤ì§€ë–í˜•": {
    emoji: "ğŸ—£ï¸",
    title: "ì˜¤ì§€ë–í˜• (Overinvolvement Type)",
    desc: [
      "íƒ€ì¸ì˜ í–‰ë™, ê²°ì •, ì‹¤ìˆ˜ ë“±ì— ê³¼ë„í•˜ê²Œ ê°œì…í•˜ê±°ë‚˜ ì¡°ì–¸í•˜ë©°, ìì‹ ì˜ ê°œì…ì„ â€˜ë„ì›€â€™ì´ë‚˜ â€˜ì •ì˜â€™ë¡œ ì°©ê°í•˜ëŠ” ê²½í–¥.",
      "ë‚¨ì˜ ë¬¸ì œì— í•´ê²°ì±…ì„ ì£¼ê±°ë‚˜ ê°œì…í•˜ë ¤ í•¨",
      "ì‹¤ìˆ˜, ë¹„íš¨ìœ¨, ì˜ëª»ëœ íŒë‹¨ì— ì°¸ê²¬ ìš•êµ¬ê°€ ê°•í•¨",
      "ê·œì¹™ ìœ„ë°˜, ì˜ëª»ëœ ê²Œì‹œê¸€, ì—°ì•  ë¬¸ì œê¹Œì§€ ê°„ì„­",
      "â€˜ê·¸ê²Œ ì•„ë‹ˆë¼ ì´ë ‡ê²Œ í•´ì•¼ì§€â€™ê°€ ê¸°ë³¸ íƒœë„"
    ],
    tip: "ë„ì›€ë³´ë‹¤ ë¨¼ì € ìš”ì²­ì´ ìˆì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”."
  },
  "ìê¸°ì¤‘ì‹¬í˜•": {
    emoji: "ğŸ™‹â€â™‚ï¸",
    title: "ìê¸°ì¤‘ì‹¬í˜• (Self-Centered Type)",
    desc: [
      "ìƒëŒ€ì˜ ì…ì¥ì´ë‚˜ ì‚¬íšŒì  ê·œë²”ë³´ë‹¤ ìì‹ ì˜ í¸ì˜ì™€ ê°ì •, í•„ìš”ë¥¼ ìš°ì„ ì‹œí•˜ë©° í–‰ë™í•˜ëŠ” ìœ í˜•. íƒ€ì¸ì— ëŒ€í•œ ë°°ë ¤ê°€ ë‚®ìŒ.",
      "ê³µê³µì¥ì†Œì—ì„œì˜ ì˜ˆì ˆ ë¬´ì‹œ (í†µí™”, ì‹œë„ëŸ¬ì›€ ë“±)",
      "ì¤„ ì•ˆ ì„œê¸°, ë¨¼ì € íƒ€ê¸°, ë¼ì–´ë“¤ê¸° ë“± ìš°ì„ ê¶Œ ì„ ì ",
      "ë¶ˆí¸í•¨ì— ëŒ€í•œ ê³µê° ê²°ì—¬",
      "â€˜ë‚´ê°€ ë¶ˆí¸í•œ ê²Œ ìš°ì„ â€™ì´ë¼ëŠ” ëª…í™•í•œ íƒœë„"
    ],
    tip: "ë‚´ê°€ í¸í•œ ë§Œí¼ íƒ€ì¸ë„ í¸í•  ìˆ˜ ìˆëŠ”ì§€ ìë¬¸í•´ë³´ì„¸ìš”."
  },
  "í”¼í•´ë§ìƒí˜•": {
    emoji: "ğŸ”",
    title: "í”¼í•´ë§ìƒí˜• (Paranoia-Sensitive Type)",
    desc: [
      "íƒ€ì¸ì˜ í–‰ë™ì´ë‚˜ ìƒí™©ì„ ë¶€ì •ì ìœ¼ë¡œ í•´ì„í•˜ê³ , ìì‹ ì´ ì†Œì™¸ë˜ê±°ë‚˜ ë¬´ì‹œë‹¹í•˜ê³  ìˆë‹¤ê³  ëŠë¼ëŠ” ê²½í–¥ì´ ê°•í•œ ìœ í˜•.",
      "ë‹¨í†¡ë°© ë©”ì‹œì§€ ë¬´ì‹œ â†’ \"ë‚˜ë§Œ ë¹¼ëŠ”êµ¬ë‚˜\"",
      "ëˆ„ê°€ ì›ƒê¸°ë§Œ í•´ë„ â†’ \"ë‚˜ ë¹„ì›ƒëŠ” ê±° ì•„ëƒ?\"",
      "ì•½ì† ì œì™¸, ë‹µì¥ ì—†ìŒ, ë°˜ì‘ ì—†ìŒ â†’ ë¶€ì •ì  í•´ì„",
      "íƒ€ì¸ì˜ â€˜ì˜ë„ ì—†ìŒâ€™ì„ í•´ì„í•´ â€˜ë‚˜ì— ëŒ€í•œ ê³µê²©â€™ìœ¼ë¡œ ì—°ê²°"
    ],
    tip: "ìƒëŒ€ê°€ ì•„ë‹ˆë¼ ë‚˜ì˜ í•´ì„ì¼ ìˆ˜ë„ ìˆë‹¤ëŠ” ì—¬ì§€ë¥¼ ë‚¨ê²¨ë‘ì„¸ìš”."
  }
};

    const info = typeDescriptions[dominant];
    if (info) {
      const html = `
        <h3>${info.emoji} ${info.title}</h3>
        <p>${info.desc[0]}</p>
        <ul>${info.desc.slice(1).map(line => `<li>${line}</li>`).join('')}</ul>
        <p><em>Tip: ${info.tip}</em></p>
      `;
      document.getElementById("typeSummary").innerHTML = html;
    }

        calculatePercentiles();
    
    function goToStart() {
  if (confirm("í…ŒìŠ¤íŠ¸ë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì§„í–‰í•˜ì‹œê² ì–´ìš”?")) {
    localStorage.clear();
    window.location.href = "index.html";
  }
}

function shareTest() {
  const url = "https://bit.ly/jinsangtest1";
  navigator.clipboard.writeText(url).then(() => {
    alert("í…ŒìŠ¤íŠ¸ ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
  });
}

function goToAbout() {
  window.location.href = "about.html";  // ë§Œë“  ì‚¬ëŒ ì†Œê°œ í˜ì´ì§€ ê²½ë¡œ
}

</script>
</body>
</html>
